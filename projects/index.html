<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
        
            .title at 0x7f5a32bed1b0&gt; | MIST Lab
        
    </title>
<link href="../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../rss.xml">
<!-- Load modern styles --><link href="../assets/css/mist-modern.css" rel="stylesheet">
<!-- Preload header background image for instant rendering --><link rel="preload" as="image" href="../images/optimized_milky.jpg">
</head>
<body>
    <!-- Enhanced Navigation -->
    <nav class="navbar navbar-default navbar-fixed-top page-scroll" role="navigation" id="main-navbar"><div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a href="../"><img src="../images/mistlogo.svg" alt="MIST Lab" id="logo" height="50"></a>
            </div>
            
            <div class="collapse navbar-collapse navbar-ex1-collapse page-scroll">
                <ul class="nav navbar-nav navbar-right">
<li><a href="../">Home</a></li>
                    <li><a href="../about/">About</a></li>
                    <li><a href="../about/#people">People</a></li>
                    <li><a href="../blog/">Blog</a></li>
                    <li><a href=".">Projects</a></li>
                    <li><a href="../publications/">Publications</a></li>
                    <li><a href="../join/">Join MIST</a></li>
                </ul>
</div>
        </div>
    </nav><!-- Projects Header --><div class="mist-header-modern">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <h1 class="mist-title-modern">
                        <i class="fa fa-rocket"></i> MIST Lab Projects
                    </h1>
                    <p class="mist-subtitle-modern">
                        Innovative research initiatives advancing space technology, autonomous systems, and computer engineering
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Projects Content -->
    <div class="container">
        <div class="row">
            <!-- Sidebar Navigation (Desktop only) -->
            <div class="col-lg-3 d-none d-lg-block">
                <nav id="projects-toc" class="projects-toc-sidebar"></nav>
</div>
            <!-- Main Content -->
            <div class="col-lg-9 col-12">
                <div class="mist-content-modern">
                    <h1 id="current">Current</h1>
<hr>
<h2 id="swarm-robotics-programming-language"><a href="http://the.swarming.buzz">Swarm Robotics Programming Language</a></h2>
<p>Swarm robotics originates from the intersection of swarm intelligence
and collective robotics. Swarm robotics systems are envisioned for
large-scale application scenarios that require reliable, scalable, and
autonomous behaviours. Among the many hurdles facing the deployment of
swarm robotics systems, one of the most important is the lack of
dedicated tools, especially regarding software. In particular, one
problem that has received little attention in the literature is
programmability. The current practice typically follows a bottom-up
approach, whereby the focus is on individual behaviours and low-level
interactions. This approach burdens developers with unnecessary
detail, slowing both the development process and the advancement of
the research field as a whole.  The main goal of this project is to
investigate approaches to realize a programming language specifically
designed for swarm robotics.
The official site for the language is <a href="http://the.swarming.buzz/">here</a>,
code and tools can be downloaded from <a href="http://github.com/mistlab/buzz">Github</a>.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/WAlS7a7_BaM" frameborder="0" allowfullscreen></iframe>

<h3 id="select-publications">Select Publications</h3>
<ul>
<li>Carlo Pinciroli and Giovanni Beltrame. Buzz: a programming language for robot swarms. IEEE Software, 33(4):97–100, July/August 2016.</li>
<li>Carlo Pinciroli and Giovanni Beltrame. Buzz: an extensible programming language for heterogeneous swarm robotics. In Proceedings of the IEEE/RSJ International Conference on Intelligent Robots and Systems (IROS 2016), October 2016.</li>
<li>Carlo Pinciroli, Adam Lee-Brown, and Giovanni Beltrame. A tuple space for data sharing in robot swarms. In 9th EAI International Conference on Bio-inspired Information and Communications Technologies (BICT 2015). ACM Digital Library, 2015. </li>
</ul>
<h3 id="students-research-staff">Students &amp; Research Staff</h3>
<ul>
<li>
<a href="../people/dstonge/">David St-Onge</a> (Postdoc)</li>
</ul>
<h3 id="sponsors">Sponsors</h3>
<p><img src="../images/pleiades.png" class="sponsor-image" alt="Pleiades" height="70px"><img src="../images/NSERC.jpg" class="sponsor-image" alt="NSERC" height="100px"></p>
<h3 id="media-coverage">Media coverage</h3>
<ul>
<li><a href="https://www.dw.com/en/the-smart-swarm/av-47321115">Tomorrow Today</a></li>
<li><a href="http://www.technologyreview.com/view/539761/a-programming-language-for-robot-swarms/">MIT Technology Review</a></li>
<li><a href="http://cacm.acm.org/news/190313-a-programming-language-for-robot-swarms">Communications of the ACM</a></li>
<li><a href="http://robohub.org/buzz-a-novel-programming-language-for-heterogeneous-robot-swarms/">RoboHub</a></li>
<li><a href="http://fusion.net/story/175797/robot-swarms-just-got-a-little-scarier/">Fusion</a></li>
<li><a href="http://developers.slashdot.org/story/15/08/10/1243207/buzz-a-novel-programming-language-for-heterogeneous-robot-swarms">Slashdot</a></li>
</ul>
<h1 id="past">Past</h1>
<hr>
<h2 id="an-internet-of-things-platform-for-humanitarian-aid">An Internet-of-Things Platform for Humanitarian Aid</h2>
<p>The aim of this project is to investigate novel approaches to create a
self-organizing Internet-of-Things (IoT) platform to help first
responders deal with the lack of communication and failing
infrastructure in disaster areas. 
This is a strategic area for Canada, as we are currently on the verge
of a new technology revolution---embedded devices and autonomous
systems are becoming more and more present in our everyday
lives. Communication, automation, and HCI are an enabling
technology for many kinds of safety-critical applications, with our
target of first response being one of the major drivers. Other
examples of applications are industrial and agricultural monitoring,
autonomous cars, and medical applications.</p>
<p>Our long-term objective is to construct a principled approach to the
development of a self-organizing platform that mixes heterogeneous
mobile systems, the cloud, and provides an intuitive interface for
users and decision makers.</p>
<h3 id="students-research-staff_1">Students &amp; Research Staff</h3>
<ul>
<li>
<a href="../people/lgianoli">Luca Giovanni Gianoli</a> (Postdoc)</li>
<li>
<a href="../people/dstonge/">David St-Onge</a> (Postdoc)</li>
</ul>
<h3 id="sponsors_1">Sponsors</h3>
<p><img src="../images/humanitas.png" class="sponsor-image" alt="Humanitas" height="100px"><img src="../images/NSERC.jpg" class="sponsor-image" alt="NSERC" height="100px"></p>
<hr>
<h2 id="adaptive-computing-systems-for-aerospace">Adaptive Computing Systems for Aerospace</h2>
<p>Today’s computer systems are growing more and more complex at a pace
that requires the development of novel and more effective
methodologies to automate their design. Space, in particular,
represents a challenging environment: without an atmosphere to protect
from ionizing or particle radiation, current CMOS-based electronics
are subject to transients faults, generalized performance reduction,
accelerated wear, and, ultimately, unrecoverable system
failure. Traditional approaches adopted to guarantee reliability and
extended lifetime are based on redundancy which is fixed at
design-time. However, these solutions are expensive in terms of
resources and require a careful trade-off, because they increase
complexity and area of the system, exposing it to a higher risk of
overheating and radiation effects. Moreover, systems that are
critical, time-constrained and where access is limited must be able to
cope with situations where they cannot rely on human
intervention. Therefore, there is an emerging interest in computer
systems with adaptive capabilities that would be especially suited for
novel high-performance embedded devices for aerospace.</p>
<p>Our aim is improving efficiency, fault-tolerance, and computational
capabilities of aerospace computer systems. In our vision, this
research will allow the creation of a new generation of computing
systems that autonomously perform their tasks for longer periods of
time, fostering simpler and cheaper space exploration.</p>
<h3 id="select-publications_1">Select Publications</h3>
<ul>
<li>
<p>Panerati J. and Beltrame G. (2014) <em>Fault-tolerant Soft Real-time
  Computing Systems based on Dynamic Bayesian Reasoning</em>, Proc. of
  International Astronautics Congress, Toronto, Canada</p>
</li>
<li>
<p>Panerati J., Abdi S., and Beltrame G. (2014) <em>Balancing System
  Availability and Lifetime with Dynamic Hidden Markov Models</em>,
  NASA/ESA Conference on Adaptive Hardware and Systems, Leicester, UK</p>
</li>
<li>
<p>Panerati J. and Beltrame G. (2014) <em>A Comparative Evaluation of
  Multi-Objective Ex- ploration Algorithms for High-Level Design</em>, ACM
  Transactions on Design Automation of Electronic Systems.</p>
</li>
<li>
<p>Panerati J., Sironi F., Carminati M., Maggio M., Beltrame G.,
  Gmytrasiewicz P.  J., Sciuto D., and Santambrogio M. D. (2013) <em>On
  Self-Adaptive Resource Allocation through Reinforcement Learning</em>,
  NASA/ESA Conference on Adaptive Hardware and Systems, Turin, Italy</p>
</li>
</ul>
<h3 id="students">Students</h3>
<ul>
<li>
<a href="../people/jpanerati/">Jacopo Panerati</a> (PhD)</li>
</ul>
<h3 id="sponsors_2">Sponsors</h3>
<p><img src="../images/NSERC.jpg" class="sponsor-image" alt="NSERC" height="100px"><img src="../images/FRQNT.png" class="sponsor-image" alt="FRQNT" height="70px"><img src="../images/logos_resmiq.png" class="sponsor-image" alt="ReSMiQ" height="70px"></p>
<hr>
<h2 id="probabilistic-real-time-systems">Probabilistic Real Time Systems</h2>
<p>Computing systems that are subject to strict operational deadlines
from event (e.g. alarms, commands, etc.) to response are called
real-time systems. These are employed in many applications where the
response time of a control system can have a critical impact on the
safety of people or infrastructure (e.g. airplanes, automobiles, or
satellites). With critical applications become more and more complex,
the performance of real-time systems has to increase to guarantee
appropriate safety standards. The main obstacle to high-performance
real-time systems is the unpredictable timing behaviour of modern
computer architectures.  </p>
<p>Currently, software designed for real-time
systems needs to be guaranteed to be executed within the required time
frame. Depending on the complexity of the underlying hardware
architecture, this level of certainty might be difficult or impossible
to reach. Within this context, this project will introduce a
probabilistic approach: by enabling true randomized behaviour in
processors and memory architectures, one can define probabilistic
metrics for the timing behaviour of a system. This would bring
real-time software engineering in line with other engineering domains,
that perform risk analysis using component failure probabilities.  In
this project we will define novel architectures and design
methodologies for truly probabilistic real-time systems, focusing on
aerospace applications. Successful implementation of such systems will
have tremendous impact on the way critical systems are designed, and
the potential benefits in terms of cost of integration, verification,
and certification of real-time software are enormous.</p>
<h3 id="select-publications_2">Select Publications</h3>
<ul>
<li>C. Chen, J. Panerati, and G. Beltrame. Effects of online fault detection mechanisms on probabilistic timing analysis. In 2016 IEEE International Symposium on Defect and Fault Tolerance in VLSI and Nanotechnology Systems (DFTS). Sept. 2016.</li>
<li>C. Chen, L. Santinelli, J. Hugues, and G. Beltrame. Static probabilistic timing analysis in presence of faults. In 11th IEEE International Symposium on Industrial Embedded Systems (SIES). May 2016.</li>
<li>H. Anwar and G. Beltrame. A probabilistically analysable cache implementation on fpga. In IEEE International NEW Circuits And Systems (NEWCAS). Grenoble, France, June 2015.</li>
</ul>
<h3 id="students_1">Students</h3>
<ul>
<li>
<a href="../people/cchen/">Chao Chen</a> (PhD)</li>
<li>
<a href="../people/hanwar/">Hassan Anwar</a> (MSc)</li>
</ul>
<h3 id="sponsors_3">Sponsors</h3>
<!-- Images -->
<p><img src="../images/NSERC.jpg" class="sponsor-image" alt="NSERC" height="100px"><img src="../images/poly.jpg" class="sponsor-image" alt="POLY" height="70px"></p>
<hr>
<h2 id="hardware-aware-real-time-code-generation">Hardware-aware Real-Time Code Generation</h2>
<p>When developing simulation software, the development team has to rely
on the competence of subject matter experts (SMEs) in different areas
and with expertise from a multitude of domains, such as mechanics,
power electronics, avionics, and more. In general, expecting SMEs to
translate their domain knowledge into an imperative programming
language is quite unrealistic, leading to the use of domain-specific
languages (DSLs). On the other hand, by trading performance for
usability to cope with software complexity, it had become increasingly
difficult to extract the maximum performance from the hardware without
a considerable knowledge of the hardware and expertise in parallel
programming. The purpose of this project is to define a methodology
for hiding software complexity from SMEs by automating the software
generation, mapping and optimization according to inputs from SMEs and
hardware and software experts, who describe the execution platform in
sufficient detail. This methodology will be applied in particular to
the aerospace industry’s Full Mission Simulators (FMSs), which are
applications that are developed and maintained by multiple SMEs. </p>
<p>The overall result of this approach will be cost-effective and
interoperable software products that will give a competitive advantage
to the aerospace industry of Canada and Quebec.</p>
<h3 id="select-publications_3">Select Publications</h3>
<ul>
<li>Rabeh Ayari, Imane Hafnaoui, Alexandra Aguiar, Patricia Gilbert, Michel Galibois, Jean-Pierre Rousseau, Giovanni Beltrame, and Gabriela Nicolescu. Multi-objective mapping of full-mission simulators on heterogeneous distributed multi-processor systems. The Journal of Defense Modeling and Simulation: Applications, Methodology, Technology, 2016.</li>
<li>Rabeh Ayari, Imane Hafnaoui, Giovanni Beltrame, and Gabriela Nicolescu. Schedulability-guided crossover operator for real-time scheduling on heterogeneous multi-core systems. In Proceedings - IEEE International Symposium on Rapid System Prototyping, RSP. Pittsburgh, PA, United States of America, 2016.</li>
<li>Imane Hafnaoui, Rabeh Ayari, Gabriela Nicolescu, and Giovanni Beltrame. Simulation-based model generator for software performance estimation. In Proceedings of the Conference on Summer Computer Simulation. Society for Computer Simulation International, 2016</li>
</ul>
<h3 id="students_2">Students</h3>
<ul>
<li>
<a href="../people/ihafnaoui/">Imane Hafnaoui</a> (PhD)</li>
</ul>
<h3 id="sponsors_4">Sponsors</h3>
<!-- Images -->
<p><img src="../images/NSERC.jpg" class="sponsor-image" alt="NSERC" height="100px"><img src="../images/CAE_Inc_Logo.png" class="sponsor-image" alt="CAE" height="70px"></p>
<hr>
<h2 id="ictherm-thermal-modelling">
<a href="http://www.ictherm.com">ICTherm</a>: Thermal modelling</h2>
<p>ICTherm is a library for the thermal modeling of electronic
devices. It is multi-scale and it allows to easily model and simulate
the thermal behavior of modern integrated circuits, such as 3D-ICs
with TSVs, microfluidic systems, and full devices. ICTherm uses novel
algorithms that enable extremely fast yet accurate simulations. The
library is written in C and runs on GNU/Linux systems.</p>
<h3 id="select-publications-and-patents">Select Publications and Patents</h3>
<ul>
<li>
<p>A Fourmigue, G Beltrame, G Nicolescu, <em>Efficient Transient Thermal
  Simulation of 3D ICs with Liquid-Cooling and Through Silicon Vias</em>,
  In Proc. of Design, Automation and Test in Europe (DATE),
  pp. 1385-1390, Dresden, Germany, Mar. 2014</p>
</li>
<li>
<p>A. Fourmigue, G. Beltrame, G. Nicolescu and E.M. Aboulhamid, <em>A
  linear-time approach for the transient thermal simulation of
  liquid-cooled 3D ICs</em>. In Proc. of CODES+ISSS, pp. 197-205, Taipei, 
  Taiwan, Oct. 2011</p>
</li>
<li>
<p>A. Fourmigue, G. Beltrame, G. Nicolescu, E.M. Aboulhamid and
  I. O'Connor, <em>Multi-granularity thermal evaluation of 3D MPSoC
  architectures</em>. In Proc. of Design, Automation and Test in Europe
  (DATE), pp. 1-4, Grenoble, France, Mar. 2011</p>
</li>
</ul>
<h3 id="tools">Tools</h3>
<p><a href="http://www.ictherm.com/download.htm">ICTherm</a> - demo version of our thermal simulator</p>
<h3 id="students_3">Students</h3>
<ul>
<li>Alain Fourmigue (PhD)</li>
<li>
<a href="../people/sriahi/">Sami Riahi</a> (MSc)</li>
</ul>
<!-- Images --><p><img src="../images/NSERC.jpg" class="sponsor-image" alt="NSERC" height="100px"></p>
<hr>
<h2 id="radiation-tolerant-fpga-architectures">Radiation-tolerant FPGA architectures</h2>
<p>Outside the protective cocoon of Earth's atmosphere, extreme
temperature changes, vacuum and a high radiation, make for a
particularly harsh environment for electronic systems.  The design of
space-grade hardware (usually referred to as “hardened components”)
requires large investments in infrastructure, and its development
usually relies on government or military projects. However, with the
recent opening of the space sector to private enterprises, the market
faces a growing interest for the use of low-cost, off-the-shelf
components (COTS). These components have to be properly screened and
the design of computer systems has to take into account and work
around their vulnerabilities. Current research focuses on using COTS
in fault-tolerant configurations to obtain reliable systems that can
be successfully used in space missions.  The benefits of this research
are not limited to the space segment: current technology trends—
smaller feature sizes, lower voltage levels, higher operating
frequencies —are projected to cause an increase in the failure rate of
integrated circuits. Similar fault-tolerance strategies used in space
applications can be used to mitigate these effects.</p>
<p>Field Programmable Gate Arrays (FPGAs) are programmable hardware
devices, and are generally used for hardware prototyping. FPGAs
typically have a higher cost per device manufactured, and lower
performance when compared to custom devices produced in large
volumes. Nevertheless, their constant evolution has made them a very
attractive proposition for the small-volume aerospace market: they can
be programmed with complex architectures with sufficient performance,
for a fraction of the cost of producing a custom integrated
circuit. FPGAs come in different flavours, and the most common, are
the FLASH and SRAM kinds. These, in their non-military versions, are
particularly sensitive to particle radiation (neturons, protons and
other ions), the effects of which, called Single Event Effects (SEEs),
can disrupt their normal behaviour. Our objective is to define
low-cost systems, based on FPGAs, that are tolerant to SEEs, without
excessively reducing their performance or functionality.</p>
<h3 id="tools_1">Tools</h3>
<p><a href="https://bitbucket.org/mistlab/morfin">MORFIN</a> - an orbital-realistic
fault-injector</p>
<h3 id="students_4">Students</h3>
<ul>
<li>
<a href="../people/pheimani/">Prakash Heimani</a> (BSc)</li>
<li>
<a href="../people/vedant/">Vedant</a> (BSc)</li>
</ul>
<h3 id="sponsors_5">Sponsors</h3>
<!-- ESA logo -->
<p><img src="../images/mitacs_logo.png" class="sponsor-image" alt="MITACS" height="70px"><img src="../images/altera.jpg" class="sponsor-image" alt="ALTERA" height="70px"><img src="../images/poly.jpg" class="sponsor-image" alt="POLY" height="70px"></p>
<hr>
<h2 id="auditory-orientation-aid-for-astronauts">Auditory Orientation Aid for Astronauts</h2>
<p>So. Let's imagine that after many years of dreaming, you're going into
space! Unfortunately, when you get into orbit, you're miserable! Like
most astronauts, you experience malaise, disorientation, dizziness,
nausea, and even vomiting.  For a long-duration mission, space
adaptation sickness is a fairly minor inconvenience, but if you have
only a few days in space to work or play, of course it's more of a
problem.  We propose a simple solution: provide an additional
reference in the form of an auditory signal, perceived as coming from
Earth. We hope to make commercial spaceflight more enjoyable.</p>
<p>This project's purpose is to create a device that provides orientation
reference information in microgravity environments. The device must be
comfortable and must not interfere with crew communication or add to
already high noise levels found on spacecraft.</p>
<div class="video-container">
<iframe width="560" height="315" src="//www.youtube.com/embed/k7uFAgHQ92M?rel=0" frameborder="0" allowfullscreen></iframe>
</div>

<h2 id="trap-fast-instruction-set-simulation">
<a href="http://trap-gen.googlecode.com">TRAP</a>: Fast instruction set simulation</h2>
<p>TRAP (TRansaction level Automatic Processor generator) is a tool for
the automatic generation of processor simulators starting from high
level descriptions. This means that the developer only need to provide
basic structural information (i.e. the number of registers, the
endianess etc.) and the behavior of each instruction of the processor
ISA; this data is then used for the generation of C++ code emulating
the processor behavior. Such an approach consistently eases the
developer's work (with respect to manual coding of the simulator) both
because it requires only the specification of the necessary details
and because it forces a separation of the processor behavior from its
structure. The tool is written in Python and it produces SystemC based
simulators. With respect to standard ADL, having the input directly
from Python eliminates the need for having an ad-hoc front-end thus
consistently reducing the development effort.  </p>
<p><img src="../images/esa.png" class="sponsor-image" alt="ESA" height="70px"></p>
<hr>
<h2 id="resp-virtual-platform-technology">
<a href="http://resp-sim.googlecode.com">ReSP</a>: Virtual platform technology</h2>
<p>ReSP is an MPSoC simulation platform working at a high abstraction
level; components used by ReSP are based on SystemC and TLM hardware
and communication description libraries. ReSP provides a non-intrusive
framework to manipulate SystemC and TLM objects. The simulation
platform is built using Python programming language; its reflective
capabilities augment the platform with the possibility of observing
the internal structure of the SystemC component models. This feature
enables run-time composition and dynamic management of the
architecture under analysis. The full potentialities offered by the
integration among Python and SystemC are exploited, during simulation,
to query, examine and, possibly, modify the internal status of the
hardware models. These capabilities simplify the debugging process for
both the modeled hardware architecture and the software running on it.</p>
<p>In order to add reflective capabilities to C++, wrappers around
SystemC components must be created; they allow interoperability
between C++ and Python languages. These wrappers are automatically
created using Py++ tool.  </p>
<p><img src="../images/esa.png" class="sponsor-image" alt="ESA" height="70px"></p>
<hr>
<h2 id="infault-radiation-tolerance-verification">InFault: Radiation-tolerance Verification</h2>
<p>A novel approach to verify Single-Event-Upset (SEU) protection based
on smart behavioral simulation. Our analysis does not require a
testbench and can perform full, exhaustive coverage within less than
an hour for typical designs.</p>
<p><img src="../images/esa.png" class="sponsor-image" alt="ESA" height="70px"></p>
                </div>
            </div>
        </div>
    </div>
    
    <script>
    // Dynamic Projects Table of Contents
    document.addEventListener('DOMContentLoaded', function() {
        function buildToc(toc, content) {
            if (!toc || !content) return;
            // Only select H2 headings (project titles), skip H1 and H3 subsections
            const headings = content.querySelectorAll('h2');
            if (!headings.length) {
                // Hide TOC if no headings found
                toc.style.display = 'none';
                return;
            }
            
            let tocHtml = '<h4><i class="fa fa-list"></i> Projects</h4><ul class="toc-list">';
            headings.forEach(function(h, idx) {
                if (!h.id) {
                    h.id = h.textContent.trim().toLowerCase().replace(/[^a-z0-9]+/g, '-').substring(0, 50);
                }
                
                // Extract only project name (remove common prefixes/suffixes)
                let displayText = h.textContent.trim();
                
                // Remove common project prefixes
                displayText = displayText.replace(/^(Project\s*\d*\s*[:\-]?\s*)/i, '');
                displayText = displayText.replace(/^(Research\s*\d*\s*[:\-]?\s*)/i, '');
                displayText = displayText.replace(/^(\d+\.\s*)/i, ''); // Remove numbering like "1. "
                
                // Keep only the main project name (first part before " - " or " : ")
                if (displayText.includes(' - ')) {
                    displayText = displayText.split(' - ')[0];
                } else if (displayText.includes(': ')) {
                    displayText = displayText.split(': ')[0];
                }
                
                // Truncate if too long
                if (displayText.length > 30) {
                    displayText = displayText.substring(0, 27) + '...';
                }
                
                const link = '<a href="#' + h.id + '" class="toc-link" title="' + h.textContent.trim() + '">' + displayText + '</a>';
                tocHtml += '<li class="toc-item toc-h2">' + link + '</li>';
            });
            tocHtml += '</ul>';
            toc.innerHTML = tocHtml;
            toc.querySelectorAll('a').forEach(a => {
                a.addEventListener('click', function(e) {
                    e.preventDefault();
                    const target = document.getElementById(this.getAttribute('href').substring(1));
                    if (target) {
                        window.scrollTo({
                            top: target.getBoundingClientRect().top + window.scrollY - 80,
                            behavior: 'smooth'
                        });
                    }
                });
            });
            function onScroll() {
                let currentId = null;
                const scrollPos = window.scrollY + 150; // Account for fixed navbar
                
                headings.forEach(h => {
                    const rect = h.getBoundingClientRect();
                    const elementTop = rect.top + window.scrollY;
                    if (elementTop <= scrollPos) {
                        currentId = h.id;
                    }
                });
                
                toc.querySelectorAll('a').forEach(a => {
                    const isActive = a.getAttribute('href') === '#' + currentId;
                    a.classList.toggle('active', isActive);
                    
                    // Ensure active item is visible in sidebar
                    if (isActive && toc.classList.contains('projects-toc-sidebar')) {
                        const tocRect = toc.getBoundingClientRect();
                        const linkRect = a.getBoundingClientRect();
                        const tocScrollTop = toc.scrollTop;
                        
                        if (linkRect.bottom > tocRect.bottom) {
                            toc.scrollTop = tocScrollTop + (linkRect.bottom - tocRect.bottom) + 20;
                        } else if (linkRect.top < tocRect.top + 50) {
                            toc.scrollTop = tocScrollTop - (tocRect.top + 50 - linkRect.top);
                        }
                    }
                });
            }
            
            // Throttle scroll events for better performance
            let ticking = false;
            function requestTocUpdate() {
                if (!ticking) {
                    requestAnimationFrame(onScroll);
                    ticking = true;
                    setTimeout(() => { ticking = false; }, 10);
                }
            }
            
            document.addEventListener('scroll', requestTocUpdate, {passive: true});
            onScroll();
        }
        // Build TOC for desktop only
        const mainContent = document.querySelector('.mist-content-modern');
        const desktopToc = document.getElementById('projects-toc');
        
        if (mainContent) {
            buildToc(desktopToc, mainContent);
        }
        
        // Add resize handler to ensure proper layout
        let resizeTimeout;
        window.addEventListener('resize', function() {
            clearTimeout(resizeTimeout);
            resizeTimeout = setTimeout(function() {
                // Refresh TOC positioning on resize
                if (desktopToc && window.innerWidth >= 992) {
                    const tocTop = desktopToc.getBoundingClientRect().top;
                    if (tocTop < 90) {
                        desktopToc.style.top = '90px';
                    }
                }
            }, 250);
        });
    });
    </script><!-- Enhanced Footer --><footer class="footer-modern"><div class="container">
            <div class="row">
                <div class="col-lg-9">
                    Contents © 2025 <a href="mailto:info@mistlab.ca">MIST Lab</a> - 
                    Powered by <a href="http://getnikola.com" rel="nofollow">Nikola</a>
                </div>
                <div class="col-lg-3">
                    <ul class="list-unstyled list-inline list-social-icons">
<li>Follow us:</li>
                        <li class="tooltip-social facebook-link">
                            <a href="https://www.facebook.com/mistlab.ca" data-toggle="tooltip" data-placement="top" title="Facebook">
                                <i class="fa fa-facebook-square fa-2x"></i>
                            </a>
                        </li>
                        <li class="tooltip-social twitter-link">
                            <a href="https://twitter.com/MIST_lab" data-toggle="tooltip" data-placement="top" title="Twitter">
                                <i class="fa fa-twitter-square fa-2x"></i>
                            </a>
                        </li>
                        <li class="tooltip-social google-plus-link">
                            <a href="https://google.com/+MistlabCa" data-toggle="tooltip" data-placement="top" title="Google+">
                                <i class="fa fa-google-plus-square fa-2x"></i>
                            </a>
                        </li>
                    </ul>
</div>
            </div>
        </div>
    </footer><!-- JavaScript Dependencies --><script src="https://code.jquery.com/jquery-3.6.0.min.js"></script><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script><!-- MIST Lab Modern Theme JavaScript --><script src="../assets/js/mist-modern.js"></script><!-- Enhanced JavaScript --><script>
        document.addEventListener('DOMContentLoaded', function() {
            // Enhanced navbar scroll effect
            window.addEventListener('scroll', function() {
                const navbar = document.getElementById('main-navbar');
                if (navbar) {
                    if (window.scrollY > 50) {
                        navbar.classList.add('navbar-scrolled');
                    } else {
                        navbar.classList.remove('navbar-scrolled');
                    }
                }
            });

            // Set active navbar item based on current page
            const basePath = '/mistlab.github.io';
            let currentPath = window.location.pathname;
            if (currentPath.startsWith(basePath)) {
                currentPath = currentPath.slice(basePath.length) || '/';
            }
            const navLinks = document.querySelectorAll('.navbar-nav a');
            
            function updateActiveNavigation() {
                const currentHash = window.location.hash; // Get current hash each time
                
                navLinks.forEach(link => {
                    const linkUrl = new URL(link.href);
                    let linkPath = linkUrl.pathname;
                    const linkHash = linkUrl.hash;
                    if (linkPath.startsWith(basePath)) {
                        linkPath = linkPath.slice(basePath.length) || '/';
                    }
                    // Remove active class from all items
                    link.parentElement.classList.remove('active');
                    
                    // Handle About page with People section
                    if (currentPath === '/about/') {
                        if (linkPath === '/about/' && linkHash === '#people') {
                            // Check if we're in people section by scroll position or hash
                            const peopleElement = document.getElementById('people');
                            if (peopleElement) {
                                const scrollPosition = window.scrollY + 100; // offset for navbar
                                const peoplePosition = peopleElement.getBoundingClientRect().top + window.scrollY;
                                
                                if (currentHash === '#people' || scrollPosition >= peoplePosition) {
                                    // Highlight People when at #people section or scrolled past it
                                    link.parentElement.classList.add('active');
                                    return;
                                }
                            }
                        } else if (linkPath === '/about/' && !linkHash) {
                            // Only highlight About if we haven't reached people section yet
                            const peopleElement = document.getElementById('people');
                            if (peopleElement) {
                                const scrollPosition = window.scrollY + 100;
                                const peoplePosition = peopleElement.getBoundingClientRect().top + window.scrollY;
                                
                                if (!currentHash && scrollPosition < peoplePosition) {
                                    link.parentElement.classList.add('active');
                                }
                            } else if (!currentHash) {
                                // Fallback if people element not found
                                link.parentElement.classList.add('active');
                            }
                        }
                        return;
                    }
                    
                    // Regular page matching (exact match for home, contains for others)
                    if (currentPath === linkPath || 
                        (currentPath.includes(linkPath) && linkPath !== '/') ||
                        (currentPath === '/' && linkPath === '/')) {
                        link.parentElement.classList.add('active');
                    }
                });
            }
            
            // Initial call
            updateActiveNavigation();
            
            // Update on scroll for about page
            if (currentPath === '/about/') {
                window.addEventListener('scroll', function() {
                    updateActiveNavigation();
                }, { passive: true });
            }
            
            // Handle hash changes for single-page navigation
            window.addEventListener('hashchange', function() {
                // Update current hash and re-run navigation logic
                window.location.hash; // trigger update
                updateActiveNavigation();
            });

            // Smooth scrolling for anchor links
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                });
            });

            // Initialize tooltips only
            if (typeof $ !== 'undefined' && $.fn.tooltip) {
                $('[data-toggle="tooltip"]').tooltip();
            }

            // Add fade-in animation to cards when they come into view
            if ('IntersectionObserver' in window) {
                const observerOptions = {
                    threshold: 0.1,
                    rootMargin: '0px 0px -50px 0px'
                };

                const observer = new IntersectionObserver(function(entries) {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.classList.add('animate-fadeInUp');
                        }
                    });
                }, observerOptions);

                // Observe all cards
                document.querySelectorAll('.modern-card, .feature-card').forEach(card => {
                    observer.observe(card);
                });
            }
        });
    </script><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-40192557-1', 'mistlab.ca');
  ga('send', 'pageview');

</script>
</body>
</html>
